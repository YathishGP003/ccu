From 37e556e35254f2355e549f62de0a4d1e3b9bb04c Mon Sep 17 00:00:00 2001
From: Amaresh C <achannalli@75f.io>
Date: Wed, 15 Jun 2022 18:46:32 +0530
Subject: [PATCH 15/50] Removed "APP_START" and "APP_RESTART" preference and
 value of appRestart point is stored in haystack database

---
 app/src/main/java/a75f/io/renatus/RenatusApp.java      | 10 ----------
 .../java/a75f/io/renatus/RenatusLandingActivity.java   |  1 -
 logic/src/main/java/a75f/io/logic/diag/DiagEquip.java  |  1 -
 3 files changed, 12 deletions(-)

diff --git a/app/src/main/java/a75f/io/renatus/RenatusApp.java b/app/src/main/java/a75f/io/renatus/RenatusApp.java
index 688eb656e..0756fd732 100644
--- a/app/src/main/java/a75f/io/renatus/RenatusApp.java
+++ b/app/src/main/java/a75f/io/renatus/RenatusApp.java
@@ -35,7 +35,6 @@ public class RenatusApp extends UtilityApplication
 	{
 		super.onCreate();
 		mContext = getApplicationContext();
-		checkForRestart();
 		AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);
 		//Fabric.with(this, new Crashlytics());
 	}
@@ -142,13 +141,4 @@ public class RenatusApp extends UtilityApplication
 		android.os.Process.killProcess(android.os.Process.myPid());
 		System.exit(0);
 	}
-
-	private void checkForRestart() {
-		Prefs prefs = new Prefs(this);
-		if (prefs.getBoolean("APP_START")){
-			prefs.setBoolean("APP_RESTART", true);
-		} else {
-			prefs.setBoolean("APP_RESTART", false);
-		}
-	}
 }
diff --git a/app/src/main/java/a75f/io/renatus/RenatusLandingActivity.java b/app/src/main/java/a75f/io/renatus/RenatusLandingActivity.java
index b69f1cc7e..57fb92cc9 100644
--- a/app/src/main/java/a75f/io/renatus/RenatusLandingActivity.java
+++ b/app/src/main/java/a75f/io/renatus/RenatusLandingActivity.java
@@ -450,7 +450,6 @@ public class RenatusLandingActivity extends AppCompatActivity implements RemoteC
     @Override
     public void onDestroy() {
         super.onDestroy();
-        prefs.setBoolean("APP_START", true);
         appRestarted();
         mCloudConnectionStatus.stopThread();
         L.saveCCUState();
diff --git a/logic/src/main/java/a75f/io/logic/diag/DiagEquip.java b/logic/src/main/java/a75f/io/logic/diag/DiagEquip.java
index d929ed29b..c79f7efa0 100644
--- a/logic/src/main/java/a75f/io/logic/diag/DiagEquip.java
+++ b/logic/src/main/java/a75f/io/logic/diag/DiagEquip.java
@@ -252,7 +252,6 @@ public class DiagEquip
             setDiagHisVal("low and memory",  mi.lowMemory? 1.0 :0);
         }
         SharedPreferences spDefaultPrefs = PreferenceManager.getDefaultSharedPreferences(Globals.getInstance().getApplicationContext());
-        boolean isAppRestart = spDefaultPrefs.getBoolean("APP_RESTART",false);
 
         PackageManager pm = Globals.getInstance().getApplicationContext().getPackageManager();
         PackageInfo pi;
-- 
2.31.0.windows.1

